<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phase 1: Reconnaissance</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #000;
      font-family: "Courier New", monospace;
      color: #ff0033;
      overflow-y: auto;
      padding: 40px;
    }

    #title {
      font-size: 2.5em;
      margin-bottom: 20px;
      letter-spacing: 2px;
      color: #ff0033;
      text-shadow: 0 0 10px #ff0033, 0 0 20px #ff1a1a, 0 0 40px #ff4d4d;
    }

    #speech {
      width: 80%;
      max-width: 900px;
      font-size: 1.2em;
      line-height: 1.6em;
      text-align: left;
      margin-top: 40px;
      white-space: pre-wrap;
    }

    #startBtn, #continueBtn {
      margin-top: 20px;
      padding: 15px 30px;
      font-size: 1.2em;
      color: #ff0033;
      border: 2px solid #ff0033;
      background: none;
      cursor: pointer;
      text-shadow: 0 0 10px #ff0033;
    }
    #startBtn:hover, #continueBtn:hover {
      background: #ff0033;
      color: #000;
    }
    #continueBtn { display: none; }

    .highlight { color:#ff1a1a; text-shadow:0 0 10px #ff0000,0 0 20px #ff3333; }
    .scramble { color: #ff0033; }
  </style>
</head>
<body>
  <div id="title">Phase 1: Reconnaissance</div>
  <button id="startBtn">Continue</button>
  <div id="speech"></div>
  <button id="continueBtn">Continue to Recon</button>

  <audio id="cipherAudio" src="phase1_intro.mp3" preload="auto"></audio>

  <script>
    const startBtn = document.getElementById("startBtn");
    const speechBox = document.getElementById("speech");
    const continueBtn = document.getElementById("continueBtn");
    const audio = document.getElementById("cipherAudio");

    const text = `>> Listen up, Operative.
Phase 1 is Reconnaissance — the hunt before the strike.
Our target is Starlight Memorial Hospital. On the surface, they save lives.
Behind closed doors, they hoard data — patient records, payroll info, research contracts — all ripe for the taking.
Your job? Gather intelligence.
Crawl their LinkedIn pages. Find the doctors, IT staff, and HR clerks.
Dig into their Facebook trails — birthdays, vacations, favorite pets — every scrap can be weaponized.
Pull their domain from public records. Whois, nslookup — tear apart their DNS like a scalpel through flesh.
Scan their blogs and press releases. Administrators love bragging about “upgrades” — and every upgrade hides a hole.
This is digital bloodwork, Operative.
Before we strike, we learn their weaknesses, their habits, their blind spots.
Get sloppy here, and the rest of the op collapses.
But nail this phase — and Starlight Hospital won’t even see the infection spreading.
Now move. Recon starts now.`

    function scrambleWord(word) {
      const chars = "!@#$%^&*()_+=-<>?";
      return word.split("").map(() => chars[Math.floor(Math.random()*chars.length)]).join("");
    }

    function typeText(words, interval, index=0) {
      if (index >= words.length) return;

      let word = words[index];
      let span = document.createElement("span");

      const rand = Math.random();
      if (rand < 0.15) {
        span.innerHTML = " ".repeat(word.length) + " ";
      } else if (rand < 0.35) {
        span.innerHTML = `<span class="scramble">${scrambleWord(word)}</span> `;
      } else if (rand < 0.55) {
        span.innerHTML = `<span class="highlight">${word}</span> `;
      } else {
        span.innerHTML = word + " ";
      }

      speechBox.appendChild(span);
      setTimeout(() => typeText(words, interval, index+1), interval);
    }

    startBtn.addEventListener("click", () => {
      startBtn.style.display = "none";

      // Play audio immediately inside the click (so browser allows it)
      audio.play().catch(err => console.log("Playback blocked:", err));

      const words = text.split(/\s+/);

      // If duration is known, sync typing to it
      function startTyping() {
        const duration = audio.duration > 0 ? audio.duration : 60; // fallback 60s
        const wordInterval = (duration * 1000) / words.length;
        typeText(words, wordInterval);
      }

      if (audio.readyState >= 1) {
        startTyping();
      } else {
        audio.onloadedmetadata = startTyping;
      }

      // Only show continue button after audio ends
      audio.addEventListener("ended", () => {
        continueBtn.style.display = "block";
      });
    });

    continueBtn.addEventListener("click", () => {
      window.location.href = "kali_linux_desktop(5)/kalilinux_desktop.html";
    });
  </script>
</body>
</html>
